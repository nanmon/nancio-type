(this["webpackJsonptyping-game"]=this["webpackJsonptyping-game"]||[]).push([[5],{337:function(t,e,n){var r=n(338),c=n(101);t.exports=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=c(n))===n?n:0),void 0!==e&&(e=(e=c(e))===e?e:0),r(c(t),e,n)}},338:function(t,e){t.exports=function(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},339:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/1.d7420ab5.wav"},34:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"h",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return h}));var r=n(32),c=n(40),i=n.n(c),a=["","Backspace"],o=["Alt","AltGraph","Control","Fn","Meta","OS"],u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(" ").filter((function(t){return t}))},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("")},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.length>t.length?e.substr(t.length):""},f=function(t,e){var n=e.fontFamily,r=e.fontSize,c=document.createElement("canvas").getContext("2d");return c.font="".concat(r,"px ").concat(n),c.measureText(t).width},d=function(t,e,n){var c=n.width,a=u(e),o=i()(u(t),a),s=0,l=["",""],f=[];return o.forEach((function(t){var e=Object(r.a)(t,2),n=e[0],i=e[1];if(n){var a=n.length;i&&i.length>n.length&&(a=i.length),s+1+a>c?(s=a,f.push([l[0].trim(),l[1].trim()]),l=[n,i||""]):(s+=1+a,l[0]+=" "+n,i&&(l[1]+=" "+i))}})),l.length>0&&f.push(l),f},h=function(t,e){var n=u(e),r=0,c=t.findIndex((function(t){var e=u(t);return r+e.length>=n.length||(r+=e.length,!1)})),i=n.slice(r).join(" ").length;return e.endsWith(" ")&&i++,[i,c]}},340:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/2.9ee81949.wav"},341:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/3.c5b467d3.wav"},342:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/4.0f83ee86.wav"},343:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/5.1c9b447b.wav"},344:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/6.d6666621.wav"},345:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/7.a1d42fec.wav"},366:function(t,e,n){"use strict";n.r(e);var r=n(165),c=n.n(r);function i(t,e,n,r,c,i,a){try{var o=t[i](a),u=o.value}catch(s){return void n(s)}o.done?e(u):Promise.resolve(u).then(r,c)}var a=n(32),o=n(0),u=n.n(o),s=n(337),l=n.n(s),f=n(71),d=n(2),h=[void 0,n(339).default,n(340).default,n(341).default,n(342).default,n(343).default,n(344).default,n(345).default];e.default=function(){var t=u.a.useState(null),e=Object(a.a)(t,2),n=e[0],r=e[1],o=u.a.useState(0),s=Object(a.a)(o,2),j=s[0],m=s[1],p=u.a.useState(null),v=Object(a.a)(p,2),b=v[0],O=v[1],x=u.a.useRef([]);return u.a.useLayoutEffect((function(){var t=Promise.all(x.current.map((function(t){return t.load(),new Promise((function(e){t.oncanplay=function(){return e(t)}}))})));fetch("/nancio-type/yoshi.txt").then(function(){var e,n=(e=c.a.mark((function e(n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.text();case 2:return i=e.sent,e.next=5,t;case 5:r({text:i});case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(t){i(a,r,c,o,u,"next",t)}function u(t){i(a,r,c,o,u,"throw",t)}o(void 0)}))});return function(t){return n.apply(this,arguments)}}())}),[]),n?Object(d.jsxs)(d.Fragment,{children:[h.map((function(t,e){return t&&Object(d.jsx)("audio",{ref:function(t){return x.current[e-1]=t},muted:e!==j,preload:"auto",loop:!0,children:Object(d.jsx)("source",{src:t,type:"audio/wav"})},e)})),Object(d.jsx)(f.a,{content:n,onType:function(t){if(b&&clearTimeout(b),Object(f.b)(t)){var e=Object(f.e)(t),n=l()(Math.floor(e/15),1,h.length-1);m(n)}else{var r=Object(f.c)(t),c=l()(Math.floor(r/15),1,h.length-1);m(c),x.current.forEach((function(t){t.play()}));var i=setTimeout((function(){m(0),x.current.forEach((function(t){t.pause(),t.currentTime=0}))}),1e3);O(i)}}})]}):Object(d.jsx)("div",{children:"Loading..."})}},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){},71:function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return j})),n.d(e,"e",(function(){return m})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return J})),n.d(e,"f",(function(){return G})),n.d(e,"g",(function(){return U}));var r=n(32),c=n(0),i=n.n(c),a=n(39);var o=n(44),u=(n(89),n(40)),s=n.n(u),l=n(54),f=n.n(l),d=n(34);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;if(0===t.timeline.length)return 0;var n=f()(t.timeline).timestamp,r=O(t,n-e,n+1e3,!1);if(0===r.length)return 0;var c=f()(r).typed,i={typed:c,content:t.content,timeline:r};return p(i)}function j(t){var e=t.typed,n=t.content,r=Object(d.h)(e),c=Object(d.h)(n.text);return!(r.length<c.length)&&(!!e.endsWith(" ")||r.pop()===c.pop())}function m(t){return p(t)-function(t){var e=0,n=Object(d.h)(t.typed);return s()(n,Object(d.h)(t.content.text)).forEach((function(t,c){var i=Object(r.a)(t,2),a=i[0],o=i[1];o&&a&&(c<n.length-1&&o.length>a.length&&e++,s()(Object(d.d)(a),Object(d.d)(o)).forEach((function(t){var n=Object(r.a)(t,2),c=n[0];n[1]!==c&&e++})))})),e}(t)/v(t)*1e3*60}function p(t){return function(t){return t.timeline.filter((function(t){return!d.a.includes(t.char)})).length}(t)/v(t)*1e3*60/5}function v(t){return 0===t.timeline.length?0:f()(t.timeline).timestamp-t.timeline[0].timestamp}function b(t){var e=t.typed,n=t.content;if(!e)return!1;var r=f()(e);if(d.a.includes(r))return!1;var c=Object(d.h)(e),i=f()(c),a=Object(d.h)(n.text)[c.length-1];if(!a)return!1;if(e.endsWith(" "))return a.length-i.length>0;var o=i[i.length-1];return a[i.length-1]!==o}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=t.timeline.findIndex((function(t){return t.timestamp>=e})),i=t.timeline.findIndex((function(t){return t.timestamp>=n}));return-1===c&&(c=0),-1===i&&(i=t.timeline.length-1),r&&(c>0&&c--,i<t.timeline.length-1&&i++),t.timeline.slice(c,i)}var x={init:function(t,e){return e.reset?{content:e.content,typed:"",screen:"typing",temp:{prevTime:0,delta:0,errors:0,count:0},timeline:[],config:{fontFamily:"monospace",fontSize:24,lineHeight:30,width:60,colors:{left:"gray",correct:"white",wrong:"red",extra:"darkred",caret:"cyan"}}}:Object(a.a)(Object(a.a)({},t),{},{content:e.content,timeline:[]})},typing:function(t,e){var n=function(t,e){var n=e.char,r=t.typed;if(" "===n&&r.endsWith(" "))return t;"Backspace"===n?r=r.substr(0,r.length-1):r+=n;return Object(a.a)(Object(a.a)({},t),{},{typed:r})}(t,e);return function(t){return j(t)?Object(a.a)(Object(a.a)({},t),{},{screen:"stats"}):t}(n=function(t,e){var n=e.char,r=e.time;if(!t.typed&&d.a.includes(n))return t;return Object(a.a)(Object(a.a)({},t),{},{timeline:[].concat(Object(o.a)(t.timeline),[{timestamp:r,char:n,typed:t.typed}])})}(n,e))},screen:function(t,e){return Object(a.a)(Object(a.a)({},t),{},{screen:e.screen})},merge:function(t,e){return Object.entries(e.state).some((function(e){var n=Object(r.a)(e,2),c=n[0],i=n[1];return t[c]!==i}))?Object(a.a)(Object(a.a)({},t),e.state):t}};function y(t,e){var n=x[e.type];return n?n(t,e):t}var g=n(2);var w=function(t){var e=t.position,n=t.focused,c=G(),a=c.config,o=c.typed,u=i.a.useState("caret"),s=Object(r.a)(u,2),l=s[0],f=s[1];if(i.a.useEffect((function(){f("caret");var t=setTimeout((function(){f("caret animated")}),500);return function(){return clearTimeout(t)}}),[o]),!e)return null;var h=Object(r.a)(e,2),j=h[0],m=h[1],p=Object(d.g)("a",a),v=m?1:0;return Object(g.jsx)("span",{className:l,style:{position:"absolute",top:0,left:0,transform:"translate(".concat(j*p+3,"px, ").concat(v*a.lineHeight+5,"px)"),color:a.colors.caret,visibility:n?"visible":"hidden"},children:"|"})},k=(n(65),i.a.memo((function(t){var e=t.text,n=t.typed,r=G().config,c=i.a.useMemo((function(){return n?e?n===e?"correct":"wrong":"extra":"left"}),[e,n]),a=r.colors[c],o=e||n,u=["Char",c].join(" ");return Object(g.jsx)("span",{className:u,style:{color:a},children:o})}))),M=(n(66),i.a.memo((function(t){var e=t.text,n=t.typed,c=t.current,i=G().config,a=s()(Object(d.d)(e),Object(d.d)(n)),o=!c&&n&&e!==n,u=["Word",o&&"redline",c&&"current"].filter((function(t){return t})).join(" "),l=Object(d.g)(" ",i);return Object(g.jsx)("div",{className:u,style:{marginRight:l,borderBottomColor:o?i.colors.wrong:"transparent"},children:a.map((function(t,e){var n=Object(r.a)(t,2),c=n[0],i=n[1];return Object(g.jsx)(k,{text:c,typed:i},e)}))})}))),C=(n(67),i.a.memo((function(t){var e=t.text,n=t.typed,c=Object(d.h)(n),i=s()(Object(d.h)(e),c,[void 0].concat(Object(o.a)(c)),c.slice(1));return Object(g.jsx)("div",{className:"Line",children:i.map((function(t,e){var c,i,a,o=Object(r.a)(t,4),u=o[0],s=o[1],l=o[2],f=o[3];return u&&Object(g.jsx)(M,{text:u,typed:s,current:(c=s,i=l,a=f,!n&&!i||(n.endsWith(" ")?null!=i&&null==c:null!=c&&null==a))},e)}))})})));var S=function(t){var e=t.onKeyPress,n=G(),c=n.content,a=n.typed,o=n.config,u=U(),s=i.a.useRef(null),l=i.a.useState(!1),f=Object(r.a)(l,2),h=f[0],j=f[1],m=i.a.useState(!1),p=Object(r.a)(m,2),v=p[0],b=p[1];i.a.useEffect((function(){var t;null===(t=s.current)||void 0===t||t.focus()}),[c.text]);var O=i.a.useMemo((function(){return Object(d.f)(c.text,a,o)}),[a,c,o]),x=i.a.useMemo((function(){return Object(d.c)(O.map((function(t){return Object(r.a)(t,1)[0]})),a)}),[O,a]);function y(t){b(t.getModifierState("CapsLock"))}var k=i.a.useMemo((function(){return x[1]<2?O.slice(0,3):O.slice(x[1]-1,x[1]+2)}),[O,x]),M=3*o.lineHeight+10;return Object(g.jsxs)("div",{className:"TypingTest",style:{fontFamily:o.fontFamily,fontSize:o.fontSize+"px",lineHeight:o.lineHeight-1+"px"},children:[Object(g.jsx)("input",{ref:s,onKeyDown:function(t){if(y(t),!e(t,"down")){var n=t.key;if(!d.b.some((function(e){return t.getModifierState(e)})))return 1===n.length||"Backspace"===n?(u({type:"typing",char:n,time:Date.now()}),void t.preventDefault()):void 0}},onKeyUp:function(t){e(t,"up"),y(t)},style:{height:0,padding:0,border:0,position:"absolute"},onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}}),Object(g.jsx)("p",{style:{visibility:v?"visible":"hidden"},children:"CAPSLOCK IS ACTIVE"}),Object(g.jsx)("div",{className:"threeLines",style:{height:M+"px",width:o.width*Object(d.g)("a",o)},children:Object(g.jsxs)("div",{className:"words",onClick:function(){var t;return null===(t=s.current)||void 0===t?void 0:t.focus()},style:{transform:"translateY(0px)"},children:[k.map((function(t){var e=Object(r.a)(t,2),n=e[0],c=e[1];return n&&Object(g.jsx)(C,{text:n,typed:c},n)})),Object(g.jsx)(w,{position:x,focused:h})]})})]})},E=n(365),N=n(333),K=n(334),P=n(361),T=n(335),A=n(336),I=n(355);n(68);var F=function(){var t=G(),e=t.content,n=t.typed,c=t.config,a=function(t,e){var n=0,c=0,i=0,a=0;return s()(Object(d.h)(t),Object(d.h)(e)).forEach((function(t){var e=Object(r.a)(t,2),o=e[0],u=e[1];s()(Object(d.d)(o),Object(d.d)(u)).forEach((function(t){var e=Object(r.a)(t,2),o=e[0],u=e[1];o||a++,u?o===u?n++:c++:i++})),n++})),{correct:--n,incorrect:c,missing:i,extra:a}}(e.text,n),o=t.timeline[0].timestamp,u=(f()(t.timeline).timestamp-o)/1e3,l=i.a.useMemo((function(){var e=Array.from({length:Math.round(u)}).map((function(e,n){return{second:n+1,wpm:L(t,n),raw:D(t,n),errors:W(t,n),typed:B(t,n)}}));return f()(e).second=u,e}),[t,u]),h=i.a.useMemo((function(){var t=Object(d.h)(e.text).join("").length;return 100*(1-l.reduce((function(t,e){return e.errors?t+e.errors:t}),0)/t)}),[l,e]);return Object(g.jsxs)("div",{className:"Stats",children:[Object(g.jsxs)("div",{className:"wpm",children:[Object(g.jsx)("h3",{children:"wpm"}),Object(g.jsx)("h2",{children:Math.round(m(t))})]}),Object(g.jsxs)("div",{className:"acc",children:[Object(g.jsx)("h3",{children:"acc"}),Object(g.jsxs)("h2",{children:[Math.round(h),"%"]})]}),Object(g.jsx)("div",{className:"chart",children:Object(g.jsxs)(E.a,{width:15*c.width,height:300,data:l,children:[Object(g.jsx)(N.a,{type:"monotone",yAxisId:"wpm",dataKey:"raw",stroke:"darkred",fill:"darkred"}),Object(g.jsx)(N.a,{type:"monotone",yAxisId:"wpm",dataKey:"wpm",stroke:"red",fill:"red"}),Object(g.jsx)(K.a,{type:"monotone",yAxisId:"errors",dataKey:"errors",stroke:"black",fill:"gray"}),Object(g.jsx)(P.a,{stroke:"#fff3",strokeDasharray:"5 5"}),Object(g.jsx)(T.a,{type:"number",dataKey:"second",tickCount:10,domain:[1,"dataMax"],allowDecimals:!1}),Object(g.jsx)(A.a,{yAxisId:"wpm"}),Object(g.jsx)(A.a,{yAxisId:"errors",orientation:"right",allowDecimals:!1}),Object(g.jsx)(I.a,{})]})}),Object(g.jsxs)("div",{className:"raw",children:[Object(g.jsx)("h3",{children:"raw"}),Object(g.jsx)("h2",{children:Math.round(p(t))})]}),Object(g.jsxs)("div",{className:"chars",children:[Object(g.jsx)("h3",{children:"characters"}),Object(g.jsxs)("h2",{children:[a.correct,"/",a.incorrect,"/",a.extra,"/",a.missing]})]}),Object(g.jsxs)("div",{className:"time",children:[Object(g.jsx)("h3",{children:"time"}),Object(g.jsxs)("h2",{children:[Math.round(u),"s"]})]})]})};function D(t,e){var n=t.timeline[0].timestamp,r=O(t,n+1e3*(e-1),n+1e3*(e+2),!0);if(0===r.length)return 0;var c={typed:f()(r).typed,content:t.content,timeline:r};return Math.round(p(c))}function L(t,e){var n=t.timeline[0].timestamp,r=O(t,n,n+1e3*(e+1),!0);if(0===r.length)return 0;var c={typed:f()(r).typed,content:t.content,timeline:r};return Math.round(m(c))}function W(t,e){var n=t.timeline[0].timestamp,r=O(t,n+1e3*e,n+1e3*(e+1),!1);return 0===r.length?null:r.reduce((function(e,n){return e+Number(b({typed:n.typed,content:t.content}))}),0)||null}function B(t,e){var n=t.timeline[0].timestamp,r=O(t,n,n+1e3*(e+1),!1);return 0===r.length?"":f()(r).typed}var H=function(t){var e=t.onKeyPress;return"stats"===G().screen?Object(g.jsx)(F,{}):Object(g.jsx)(S,{onKeyPress:e})},R=i.a.createContext(V({text:""})),z=i.a.createContext(null);function J(t){var e=t.typed,n=t.content,c=t.onType,a=t.onKeyPress,o=void 0===a?function(){return!1}:a,u=t.restartOnContentChange,s=void 0===u||u,l=i.a.useReducer(y,null,(function(){return V(n)})),f=Object(r.a)(l,2),d=f[0],h=f[1];i.a.useEffect((function(){h({type:"init",content:n,reset:s})}),[n,s]),i.a.useEffect((function(){e&&h({type:"merge",state:{typed:e}})}),[e]);var j=i.a.useRef(null);return i.a.useEffect((function(){c&&j.current!==d.typed&&(null!==j.current&&c(d),j.current=d.typed)}),[d,c]),Object(g.jsx)(z.Provider,{value:h,children:Object(g.jsx)(R.Provider,{value:d,children:Object(g.jsx)(H,{onKeyPress:o})})})}function G(){return i.a.useContext(R)}function U(){return i.a.useContext(z)}function V(t){return y(null,{type:"init",content:t,reset:!0})}}}]);
//# sourceMappingURL=5.f8b9386a.chunk.js.map