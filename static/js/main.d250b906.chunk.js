(this["webpackJsonptyping-game"]=this["webpackJsonptyping-game"]||[]).push([[0],{32:function(t,e,n){},33:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/1.d7420ab5.wav"},39:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/2.9ee81949.wav"},40:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/3.c5b467d3.wav"},41:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/4.0f83ee86.wav"},42:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/5.1c9b447b.wav"},43:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/6.d6666621.wav"},44:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/7.a1d42fec.wav"},53:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(23),i=n.n(a),o=(n(32),n(33),n(26)),u=n(4),s=n(2);var l=n(9),f=n(3),d=(n(17),n(24),function(t){return t[t.length-1]}),p=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.map((function(t,e){return[t].concat(Object(l.a)(n.map((function(t){return t[e]}))))}))};function j(t){return t.reduce((function(t,e){return t+e}),0)/t.length}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(" ").filter((function(t){return t}))},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("")},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.length>t.length?e.substr(t.length):""};function m(t){var e=t.typed,n=t.content,r=h(e),c=h(n.text);return!(r.length<c.length)&&(!!e.endsWith(" ")||r.pop()===c.pop())}function O(t,e){var n=e.char;if(["","Backspace"].includes(n))return!1;var r=t.typed,c=t.content,a=h(r),i=d(a),o=h(c.text)[a.length-1];if(!o)return!1;if(r.endsWith(" "))return o.length>i.length;var u=i[i.length-1];return o[i.length-1]!==u}function g(t,e,n){var r=e.time,c=e.char,a=t.temp.count/(1/60*5);return Object(f.a)(Object(f.a)({},t),{},{stats:Object(f.a)(Object(f.a)({},t.stats),{},{wpm:[].concat(Object(l.a)(t.stats.wpm),[a]),errs:[].concat(Object(l.a)(t.stats.errs),[t.temp.errors])}),temp:{delta:n,prevTime:r,count:["","Backspace"].includes(c)?0:1,errors:O(t,{char:c})?1:0}})}var x={init:function(t,e){return{content:e.content,typed:"",screen:"typing",stats:{count:0,prevCount:0,wpm:[],errors:0,errs:[]},temp:{prevTime:0,delta:0,errors:0,count:0},config:{fontFamily:"monospace",fontSize:24,lineHeight:30,width:800,colors:{left:"gray",correct:"white",wrong:"red",extra:"darkred",caret:"cyan"}}}},typing:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];return e.reduce((function(t,e){return e.apply(void 0,[t].concat(r))}),t)}}((function(t,e){var n=e.char,r=t.typed;if(" "===n&&r.endsWith(" "))return t;"Backspace"===n?r=r.substr(0,r.length-1):r+=n;return Object(f.a)(Object(f.a)({},t),{},{typed:r})}),(function(t,e){var n=e.char;return["","Backspace"].includes(n)?t:Object(f.a)(Object(f.a)({},t),{},{stats:Object(f.a)(Object(f.a)({},t.stats),{},{count:t.stats.count+1})})}),(function(t,e){return O(t,e)?Object(f.a)(Object(f.a)({},t),{},{stats:Object(f.a)(Object(f.a)({},t.stats),{},{errors:t.stats.errors+1})}):t}),(function(t,e){var n=e.time,r=e.char,c=t.temp;if(0===c.prevTime)return Object(f.a)(Object(f.a)({},t),{},{temp:{delta:0,prevTime:n,count:["","Backspace"].includes(r)?0:1,errors:O(t,{char:r})?1:0}});var a=c.delta+(n-c.prevTime);if(a<1e3)return Object(f.a)(Object(f.a)({},t),{},{temp:{delta:a,prevTime:n,count:"Backspace"===r?c.count:c.count+1,errors:O(t,{char:r})?c.errors+1:c.errors}});var i=Object(f.a)({},t);for(;a>1e3;)i=g(i,{time:n,char:r},a-=1e3),r="";return i}),(function(t){return m(t)?Object(f.a)(Object(f.a)({},t),{},{screen:"stats"}):t})),screen:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{screen:e.screen})}};function y(t,e){var n=x[e.type];return n?n(t,e):t}var w=n(1);var C=function(t){var e=t.position,n=t.focused,r=N(),a=r.config,i=r.typed,o=c.a.useState("caret"),u=Object(s.a)(o,2),l=u[0],f=u[1];return c.a.useEffect((function(){f("caret");var t=setTimeout((function(){f("caret animated")}),500);return function(){return clearTimeout(t)}}),[i]),e?Object(w.jsx)("span",{className:l,style:{position:"absolute",top:0,left:0,transform:"translate(".concat(e.x-8,"px, ").concat(e.y-2,"px)"),color:a.colors.caret,visibility:n?"visible":"hidden"},children:"|"}):null};var S=function(t){var e=t.text,n=t.typed,r=N().config,a=c.a.useMemo((function(){return n?e?n===e?"correct":"wrong":"extra":"left"}),[e,n]),i=r.colors[a],o=e||n,u=["Char",a].join(" ");return Object(w.jsx)("span",{className:u,style:{color:i},children:o})};n(35);var T=function(t){var e=t.text,n=t.typed,r=t.current,c=N().config,a=p(v(e),v(n)),i=b(e,n);v(i).forEach((function(t){a.push([null,t])}));var o=!r&&n&&e!==n,u=["Word",o&&"redline",r&&"current"].filter((function(t){return t})).join(" "),l=function(t,e){var n=e.fontFamily,r=e.fontSize,c=document.createElement("canvas").getContext("2d");return c.font="".concat(r,"px ").concat(n),c.measureText(t).width}(" ",c);return Object(w.jsx)("div",{className:u,style:{marginRight:l,borderBottomColor:o?c.colors.wrong:"transparent"},children:a.map((function(t,e){var n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(w.jsx)(S,{text:r,typed:c},e)}))})};n(36);var k=function(){var t=N(),e=t.content,n=t.typed,r=t.config,a=c.a.useContext(A),i=c.a.useRef(null),o=c.a.useState(!1),u=Object(s.a)(o,2),f=u[0],j=u[1],v=c.a.useState(!1),b=Object(s.a)(v,2),m=b[0],O=b[1],g=function(t,e){var n=c.a.useState(null),r=Object(s.a)(n,2),a=r[0],i=r[1];return c.a.useEffect((function(){var t=document.querySelector(".Word.current");if(t){var n=document.querySelector(".words").getBoundingClientRect(),r=t.getBoundingClientRect(),c=t.querySelectorAll(".Char:not(.left)");if(0!==c.length){var a=d(c).getBoundingClientRect();i({x:a.right-n.left,y:r.bottom-n.top-e.lineHeight})}else i({x:r.left-n.left,y:r.bottom-n.top-e.lineHeight})}}),[t,e]),a}(n,r);c.a.useEffect((function(){var t;null===(t=i.current)||void 0===t||t.focus()}),[e.text]);var x=h(n),y=p(h(e.text),x,[null].concat(Object(l.a)(x)),x.slice(1));function S(t){O(t.getModifierState("CapsLock"))}var k=c.a.useMemo((function(){if(!g)return 0;var t=Math.floor(g.y/r.lineHeight);return t<1?0:(t-1)*r.lineHeight}),[g,r]);return Object(w.jsxs)("div",{className:"TypingTest",style:{fontFamily:r.fontFamily,fontSize:r.fontSize+"px",lineHeight:r.lineHeight-2+"px"},children:[Object(w.jsx)("input",{ref:i,onKeyDown:function(t){S(t);var e=t.key;if(1===e.length||"Backspace"===e)return a({type:"typing",char:e,time:Date.now()}),void t.preventDefault()},onKeyUp:S,style:{height:0,padding:0,border:0,position:"absolute"},onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}}),Object(w.jsx)("p",{style:{visibility:m?"visible":"hidden"},children:"CAPSLOCK IS ACTIVE"}),Object(w.jsx)("div",{className:"threeLines",style:{height:3*r.lineHeight+"px"},children:Object(w.jsxs)("div",{className:"words",onClick:function(){var t;return null===(t=i.current)||void 0===t?void 0:t.focus()},style:{maxWidth:r.width,transform:"translateY(".concat(-k,"px)")},children:[y.map((function(t,e){var r,c,a,i=Object(s.a)(t,4),o=i[0],u=i[1],l=i[2],f=i[3];return Object(w.jsx)(T,{text:o,typed:u,current:(r=u,c=l,a=f,!n&&!c||(n.endsWith(" ")?null!=c&&null==r:null!=r&&null==a))},e)})),Object(w.jsx)(C,{position:g,focused:f})]})})]})};var E=function(){var t=N(),e=t.stats,n=t.content,r=t.typed,c=100*(1-e.errors/n.text.length),a=function(t,e){var n=0,r=0,c=0,a=0;return p(h(t),h(e)).forEach((function(t){var e=Object(s.a)(t,2),i=e[0],o=e[1];p(v(i),v(o)).forEach((function(t){var e=Object(s.a)(t,2),a=e[0],i=e[1];i?a===i?n++:r++:c++})),v(b(i,o)).forEach((function(){return a++}))})),{correct:n,incorrect:r,missing:c,extra:a}}(n.text,r);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{children:["Avg: ",j(e.wpm)," wpm"]}),Object(w.jsxs)("p",{children:["Time: ",e.wpm.length,"s "]}),Object(w.jsxs)("p",{children:["Acc: ",c,"%"]}),Object(w.jsxs)("p",{title:"correct/incorrect/extra/missing",children:["Chars: ",a.correct,"/",a.incorrect,"/",a.extra,"/",a.missing]})]})};var B=function(){return"stats"===N().screen?Object(w.jsx)(E,{}):Object(w.jsx)(k,{})},F=c.a.createContext(H({text:""})),A=c.a.createContext(null);function M(t){var e=t.content,n=t.onType,r=c.a.useReducer(y,null,(function(){return H(e)})),a=Object(s.a)(r,2),i=a[0],o=a[1];c.a.useEffect((function(){o({type:"init",content:e})}),[e]);var u=c.a.useRef(null);return c.a.useEffect((function(){n&&u.current!==i.typed&&(null!==u.current&&n(i),u.current=i.typed)}),[i,n]),Object(w.jsx)(A.Provider,{value:o,children:Object(w.jsx)(F.Provider,{value:i,children:Object(w.jsx)(B,{})})})}function N(){return c.a.useContext(F)}function H(t){return y(null,{type:"init",content:t})}var L=function(){var t=c.a.useState([]),e=Object(s.a)(t,2),n=e[0],r=e[1],a=c.a.useState(-1),i=Object(s.a)(a,2),o=i[0],u=i[1];c.a.useEffect((function(){fetch("https://raw.githubusercontent.com/Miodec/monkeytype/master/static/quotes/english.json").then((function(t){return t.json()})).then((function(t){var e=t.quotes;r(e),u(R(e.length))}))}),[]);var l=c.a.useCallback((function(t){}),[]);return-1===o?Object(w.jsx)("div",{children:"Loading..."}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M,{content:n[o],onType:l}),Object(w.jsx)("button",{onClick:function(){return u(R(n.length))},children:"Next"})]})};function R(t){return Math.floor(Math.random()*t)}var q,P,W=n(20),z=n.n(W),D=n(25),I=[void 0,n(38).default,n(39).default,n(40).default,n(41).default,n(42).default,n(43).default,n(44).default],K=(q=1,P=I.length-1,function(t){return t<q?q:t>P?P:t});var J=function(){var t=c.a.useState(null),e=Object(s.a)(t,2),n=e[0],r=e[1],a=c.a.useState(0),i=Object(s.a)(a,2),o=i[0],u=i[1],l=c.a.useState(null),f=Object(s.a)(l,2),p=f[0],h=f[1],v=c.a.useRef([]);return c.a.useLayoutEffect((function(){var t=Promise.all(v.current.map((function(t){return t.load(),new Promise((function(e){t.oncanplay=function(){return e(t)}}))})));fetch("/nancio-type/yoshi.txt").then(function(){var e=Object(D.a)(z.a.mark((function e(n){var c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.text();case 2:return c=e.sent,e.next=5,t;case 5:r({text:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n?Object(w.jsxs)(w.Fragment,{children:[I.map((function(t,e){return t&&Object(w.jsx)("audio",{ref:function(t){return v.current[e-1]=t},muted:e!==o,preload:"auto",loop:!0,children:Object(w.jsx)("source",{src:t,type:"audio/wav"})},e)})),Object(w.jsx)(M,{content:n,onType:function(t){if(p&&clearTimeout(p),m(t)){var e=j(t.stats.wpm),n=K(Math.floor(e/15));u(n)}else{var r=0|function(t){return d(t.stats.wpm)}(t),c=K(Math.floor(r/15));u(c),v.current.forEach((function(t){t.play()}));var a=setTimeout((function(){u(0),v.current.forEach((function(t){t.pause(),t.currentTime=0}))}),1e3);h(a)}}})]}):Object(w.jsx)("div",{children:"Loading..."})};var U=function(){return Object(w.jsx)(o.a,{children:Object(w.jsxs)(u.d,{children:[Object(w.jsx)(u.b,{path:"/quotes",children:Object(w.jsx)(L,{})}),Object(w.jsx)(u.b,{path:"/yoshi",children:Object(w.jsx)(J,{})}),Object(w.jsx)(u.a,{to:"/quotes"})]})})};var V=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)("header",{className:"App-header",children:Object(w.jsx)(U,{})})})},Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(V,{})}),document.getElementById("root")),Y()}},[[53,1,2]]]);
//# sourceMappingURL=main.d250b906.chunk.js.map