(this["webpackJsonptyping-game"]=this["webpackJsonptyping-game"]||[]).push([[0],{189:function(t,e,n){},190:function(t,e,n){},192:function(t,e,n){},193:function(t,e,n){},194:function(t,e,n){},330:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/1.d7420ab5.wav"},331:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/2.9ee81949.wav"},332:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/3.c5b467d3.wav"},333:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/4.0f83ee86.wav"},334:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/5.1c9b447b.wav"},335:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/6.d6666621.wav"},336:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/7.a1d42fec.wav"},342:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),i=n(86),a=n.n(i),o=(n(189),n(190),n(178)),u=n(19),s=n(11);var l=n(38),f=n(27),d=(n(92),n(91),function(t){return t[t.length-1]}),h=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.map((function(t,e){return[t].concat(Object(l.a)(n.map((function(t){return t[e]}))))}))};var j=["","Backspace"],p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(" ").filter((function(t){return t}))},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("")},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.length>t.length?e.substr(t.length):""};function b(t){var e=t.typed,n=t.content,r=p(e),c=p(n.text);return!(r.length<c.length)&&(!!e.endsWith(" ")||r.pop()===c.pop())}function x(t){return y(t)-function(t){var e=0,n=p(t.typed);return h(n,p(t.content.text)).forEach((function(t,r){var c=Object(s.a)(t,2),i=c[0],a=c[1];r<n.length-1&&a.length>i.length&&e++,h(m(i),m(a)).forEach((function(t){var n=Object(s.a)(t,2),r=n[0];n[1]!==r&&e++}))})),e}(t)/g(t)*1e3*60}function y(t){return function(t){return t.timeline.filter((function(t){return!j.includes(t.char)})).length}(t)/g(t)*1e3*60/5}function g(t){return d(t.timeline).timestamp-t.timeline[0].timestamp}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=t.timeline.findIndex((function(t){return t.timestamp>=e})),i=t.timeline.findIndex((function(t){return t.timestamp>=n}));return-1===c&&(c=0),-1===i&&(i=t.timeline.length-1),r&&(c>0&&c--,i<t.timeline.length-1&&i++),t.timeline.slice(c,i)}var w={init:function(t,e){return{content:e.content,typed:"",screen:"typing",temp:{prevTime:0,delta:0,errors:0,count:0},timeline:[],config:{fontFamily:"monospace",fontSize:24,lineHeight:30,width:800,colors:{left:"gray",correct:"white",wrong:"red",extra:"darkred",caret:"cyan"}}}},typing:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];return e.reduce((function(t,e){return e.apply(void 0,[t].concat(r))}),t)}}((function(t,e){var n=e.char,r=t.typed;if(" "===n&&r.endsWith(" "))return t;"Backspace"===n?r=r.substr(0,r.length-1):r+=n;return Object(f.a)(Object(f.a)({},t),{},{typed:r})}),(function(t,e){var n=e.char,r=e.time;if(!t.typed&&j.includes(n))return t;return Object(f.a)(Object(f.a)({},t),{},{timeline:[].concat(Object(l.a)(t.timeline),[{timestamp:r,char:n,typed:t.typed}])})}),(function(t){return b(t)?Object(f.a)(Object(f.a)({},t),{},{screen:"stats"}):t})),screen:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{screen:e.screen})}};function k(t,e){var n=w[e.type];return n?n(t,e):t}var C=n(2);var S=function(t){var e=t.position,n=t.focused,r=U(),i=r.config,a=r.typed,o=c.a.useState("caret"),u=Object(s.a)(o,2),l=u[0],f=u[1];return c.a.useEffect((function(){f("caret");var t=setTimeout((function(){f("caret animated")}),500);return function(){return clearTimeout(t)}}),[a]),e?Object(C.jsx)("span",{className:l,style:{position:"absolute",top:0,left:0,transform:"translate(".concat(e.x-8,"px, ").concat(e.y-2,"px)"),color:i.colors.caret,visibility:n?"visible":"hidden"},children:"|"}):null};var M=function(t){var e=t.text,n=t.typed,r=U().config,i=c.a.useMemo((function(){return n?e?n===e?"correct":"wrong":"extra":"left"}),[e,n]),a=r.colors[i],o=e||n,u=["Char",i].join(" ");return Object(C.jsx)("span",{className:u,style:{color:a},children:o})};n(192);var E=function(t){var e=t.text,n=t.typed,r=t.current,c=U().config,i=h(m(e),m(n)),a=v(e,n);m(a).forEach((function(t){i.push([null,t])}));var o=!r&&n&&e!==n,u=["Word",o&&"redline",r&&"current"].filter((function(t){return t})).join(" "),l=function(t,e){var n=e.fontFamily,r=e.fontSize,c=document.createElement("canvas").getContext("2d");return c.font="".concat(r,"px ").concat(n),c.measureText(t).width}(" ",c);return Object(C.jsx)("div",{className:u,style:{marginRight:l,borderBottomColor:o?c.colors.wrong:"transparent"},children:i.map((function(t,e){var n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(C.jsx)(M,{text:r,typed:c},e)}))})};n(193);var N=function(){var t=U(),e=t.content,n=t.typed,r=t.config,i=c.a.useContext(z),a=c.a.useRef(null),o=c.a.useState(!1),u=Object(s.a)(o,2),f=u[0],j=u[1],m=c.a.useState(!1),v=Object(s.a)(m,2),b=v[0],x=v[1],y=function(t,e){var n=c.a.useState(null),r=Object(s.a)(n,2),i=r[0],a=r[1];return c.a.useEffect((function(){var t=document.querySelector(".Word.current");if(t){var n=document.querySelector(".words").getBoundingClientRect(),r=t.getBoundingClientRect(),c=t.querySelectorAll(".Char:not(.left)");if(0!==c.length){var i=d(c).getBoundingClientRect();a({x:i.right-n.left,y:r.bottom-n.top-e.lineHeight})}else a({x:r.left-n.left,y:r.bottom-n.top-e.lineHeight})}}),[t,e]),i}(n,r);c.a.useEffect((function(){var t;null===(t=a.current)||void 0===t||t.focus()}),[e.text]);var g=p(n),O=h(p(e.text),g,[null].concat(Object(l.a)(g)),g.slice(1));function w(t){x(t.getModifierState("CapsLock"))}var k=c.a.useMemo((function(){if(!y)return 0;var t=Math.floor(y.y/r.lineHeight);return t<1?0:(t-1)*r.lineHeight}),[y,r]),M=3*r.lineHeight+10;return Object(C.jsxs)("div",{className:"TypingTest",style:{fontFamily:r.fontFamily,fontSize:r.fontSize+"px",lineHeight:r.lineHeight-1+"px"},children:[Object(C.jsx)("input",{ref:a,onKeyDown:function(t){w(t);var e=t.key;if(1===e.length||"Backspace"===e)return i({type:"typing",char:e,time:Date.now()}),void t.preventDefault()},onKeyUp:w,style:{height:0,padding:0,border:0,position:"absolute"},onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}}),Object(C.jsx)("p",{style:{visibility:b?"visible":"hidden"},children:"CAPSLOCK IS ACTIVE"}),Object(C.jsx)("div",{className:"threeLines",style:{height:M+"px"},children:Object(C.jsxs)("div",{className:"words",onClick:function(){var t;return null===(t=a.current)||void 0===t?void 0:t.focus()},style:{maxWidth:r.width,transform:"translateY(".concat(-k,"px)")},children:[O.map((function(t,e){var r,c,i,a=Object(s.a)(t,4),o=a[0],u=a[1],l=a[2],f=a[3];return Object(C.jsx)(E,{text:o,typed:u,current:(r=u,c=l,i=f,!n&&!c||(n.endsWith(" ")?null!=c&&null==r:null!=r&&null==i))},e)})),Object(C.jsx)(S,{position:y,focused:f})]})})]})},T=n(349),A=n(172),F=n(174),I=n(347),B=n(175),H=n(176),L=n(78);n(194);var R=function(){var t=U(),e=t.content,n=t.typed,r=t.config,i=function(t,e){var n=0,r=0,c=0,i=0;return h(p(t),p(e)).forEach((function(t){var e=Object(s.a)(t,2),a=e[0],o=e[1];h(m(a),m(o)).forEach((function(t){var e=Object(s.a)(t,2),i=e[0],a=e[1];a?i===a?n++:r++:c++})),m(v(a,o)).forEach((function(){return i++})),n++})),{correct:--n,incorrect:r,missing:c,extra:i}}(e.text,n),a=t.timeline[0].timestamp,o=(d(t.timeline).timestamp-a)/1e3,u=c.a.useMemo((function(){var e=Array.from({length:Math.round(o)}).map((function(e,n){return{second:n+1,wpm:D(t,n),raw:q(t,n),errors:K(t,n)}}));return d(e).second=o,e}),[t,o]),l=c.a.useMemo((function(){var t=p(e.text).join("").length;return 100*(1-u.reduce((function(t,e){return e.errors?t+e.errors:t}),0)/t)}),[u,e]);return Object(C.jsxs)("div",{className:"Stats",children:[Object(C.jsxs)("div",{className:"wpm",children:[Object(C.jsx)("h3",{children:"wpm"}),Object(C.jsx)("h2",{children:Math.round(x(t))})]}),Object(C.jsxs)("div",{className:"acc",children:[Object(C.jsx)("h3",{children:"acc"}),Object(C.jsxs)("h2",{children:[Math.round(l),"%"]})]}),Object(C.jsx)("div",{className:"chart",children:Object(C.jsxs)(T.a,{width:r.width,height:300,data:u,children:[Object(C.jsx)(A.a,{type:"monotone",yAxisId:"wpm",dataKey:"raw",stroke:"darkred",fill:"darkred"}),Object(C.jsx)(A.a,{type:"monotone",yAxisId:"wpm",dataKey:"wpm",stroke:"red",fill:"red"}),Object(C.jsx)(F.a,{type:"monotone",yAxisId:"errors",dataKey:"errors",stroke:"black",fill:"gray"}),Object(C.jsx)(I.a,{stroke:"#fff3",strokeDasharray:"5 5"}),Object(C.jsx)(B.a,{type:"number",dataKey:"second",tickCount:10,domain:[1,"dataMax"],allowDecimals:!1}),Object(C.jsx)(H.a,{yAxisId:"wpm"}),Object(C.jsx)(H.a,{yAxisId:"errors",orientation:"right",allowDecimals:!1}),Object(C.jsx)(L.a,{})]})}),Object(C.jsxs)("div",{className:"raw",children:[Object(C.jsx)("h3",{children:"raw"}),Object(C.jsx)("h2",{children:Math.round(y(t))})]}),Object(C.jsxs)("div",{className:"chars",children:[Object(C.jsx)("h3",{children:"characters"}),Object(C.jsxs)("h2",{children:[i.correct,"/",i.incorrect,"/",i.extra,"/",i.missing]})]}),Object(C.jsxs)("div",{className:"time",children:[Object(C.jsx)("h3",{children:"time"}),Object(C.jsxs)("h2",{children:[Math.round(o),"s"]})]})]})};function q(t,e){var n=t.timeline[0].timestamp,r=O(t,n+1e3*(e-1),n+1e3*(e+2),!1);if(0===r.length)return 0;var c={typed:d(r).typed,content:t.content,timeline:r};return Math.round(y(c))}function D(t,e){var n=t.timeline[0].timestamp,r=O(t,n,n+1e3*(e+1),!0);if(0===r.length)return 0;var c={typed:d(r).typed,content:t.content,timeline:r};return Math.round(x(c))}function K(t,e){var n=t.timeline[0].timestamp,r=O(t,n+1e3*e,n+1e3*(e+1),!1);return 0===r.length?null:r.reduce((function(e,n){return e+Number(function(t){var e=t.typed,n=t.content,r=d(e);if(j.includes(r))return!1;var c=p(e),i=d(c),a=p(n.text)[c.length-1];if(!a)return!1;if(e.endsWith(" "))return a.length-i.length>0;var o=i[i.length-1];return a[i.length-1]!==o}({typed:n.typed,content:t.content}))}),0)||null}var P=function(){return"stats"===U().screen?Object(C.jsx)(R,{}):Object(C.jsx)(N,{})},W=c.a.createContext(V({text:""})),z=c.a.createContext(null);function J(t){var e=t.content,n=t.onType,r=c.a.useReducer(k,null,(function(){return V(e)})),i=Object(s.a)(r,2),a=i[0],o=i[1];c.a.useEffect((function(){o({type:"init",content:e})}),[e]);var u=c.a.useRef(null);return c.a.useEffect((function(){n&&u.current!==a.typed&&(null!==u.current&&n(a),u.current=a.typed)}),[a,n]),Object(C.jsx)(z.Provider,{value:o,children:Object(C.jsx)(W.Provider,{value:a,children:Object(C.jsx)(P,{})})})}function U(){return c.a.useContext(W)}function V(t){return k(null,{type:"init",content:t})}var Y=function(){var t=c.a.useState([]),e=Object(s.a)(t,2),n=e[0],r=e[1],i=c.a.useState(-1),a=Object(s.a)(i,2),o=a[0],u=a[1];c.a.useEffect((function(){fetch("https://raw.githubusercontent.com/Miodec/monkeytype/master/static/quotes/english.json").then((function(t){return t.json()})).then((function(t){var e=t.quotes;r(e),u(G(e.length))}))}),[]);var l=c.a.useCallback((function(t){}),[]);return-1===o?Object(C.jsx)("div",{children:"Loading..."}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(J,{content:n[o],onType:l}),Object(C.jsx)("button",{onClick:function(){return u(G(n.length))},children:"Next"})]})};function G(t){return Math.floor(Math.random()*t)}var Q,X,Z=n(66),$=n.n(Z),_=n(177),tt=[void 0,n(330).default,n(331).default,n(332).default,n(333).default,n(334).default,n(335).default,n(336).default],et=(Q=1,X=tt.length-1,function(t){return t<Q?Q:t>X?X:t});var nt=function(){var t=c.a.useState(null),e=Object(s.a)(t,2),n=e[0],r=e[1],i=c.a.useState(0),a=Object(s.a)(i,2),o=a[0],u=a[1],l=c.a.useState(null),f=Object(s.a)(l,2),h=f[0],j=f[1],p=c.a.useRef([]);return c.a.useLayoutEffect((function(){var t=Promise.all(p.current.map((function(t){return t.load(),new Promise((function(e){t.oncanplay=function(){return e(t)}}))})));fetch("/nancio-type/yoshi.txt").then(function(){var e=Object(_.a)($.a.mark((function e(n){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.text();case 2:return c=e.sent,e.next=5,t;case 5:r({text:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n?Object(C.jsxs)(C.Fragment,{children:[tt.map((function(t,e){return t&&Object(C.jsx)("audio",{ref:function(t){return p.current[e-1]=t},muted:e!==o,preload:"auto",loop:!0,children:Object(C.jsx)("source",{src:t,type:"audio/wav"})},e)})),Object(C.jsx)(J,{content:n,onType:function(t){if(h&&clearTimeout(h),b(t)){var e=x(t),n=et(Math.floor(e/15));u(n)}else{var r=function(t){if(0===t.timeline.length)return 0;var e=d(t.timeline).timestamp,n=O(t,e-5e3,e+1e3,!1);return 0===n.length?0:y({typed:d(n).typed,content:t.content,timeline:n})}(t),c=et(Math.floor(r/15));u(c),p.current.forEach((function(t){t.play()}));var i=setTimeout((function(){u(0),p.current.forEach((function(t){t.pause(),t.currentTime=0}))}),1e3);j(i)}}})]}):Object(C.jsx)("div",{children:"Loading..."})};var rt=function(){return Object(C.jsx)(o.a,{children:Object(C.jsxs)(u.d,{children:[Object(C.jsx)(u.b,{path:"/quotes",children:Object(C.jsx)(Y,{})}),Object(C.jsx)(u.b,{path:"/yoshi",children:Object(C.jsx)(nt,{})}),Object(C.jsx)(u.a,{to:"/quotes"})]})})};var ct=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)("header",{className:"App-header",children:Object(C.jsx)(rt,{})})})},it=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,350)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),r(t),c(t),i(t),a(t)}))};a.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(ct,{})}),document.getElementById("root")),it()}},[[342,1,2]]]);
//# sourceMappingURL=main.248a6a6c.chunk.js.map